

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Solar-powered pump &#8212; Computational Thermodynamics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-dropdown.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Exergy" href="../exergy/exergy.html" />
    <link rel="prev" title="Turbine isentropic efficiency" href="turbine-efficiency.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  <img src="../../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Computational Thermodynamics</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Computational Thermodynamics
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../setting-up-environment.html">
   Setting up your computing environment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro-solving-problems.html">
   Solving thermodynamics problems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intro-using-coolprop.html">
   Using CoolProp
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../using-scipy.html">
   Using NumPy and SciPy modules
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Modules
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../first-law/first-law.html">
   First Law of Thermodynamics
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="reference internal" href="second-law.html">
   Second Law of Thermodynamics
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="vortex-tube.html">
     Vortex tube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="heating-water.html">
     Water heating
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="turbine-efficiency.html">
     Turbine isentropic efficiency
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Solar-powered pump
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../exergy/exergy.html">
   Exergy
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../properties-pure/properties-pure.html">
   Properties of Pure Fluids
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mixtures/mixtures.html">
   Mixture properties
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../combustion/combustion.html">
   Combustion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../chemical-equilibrium/chemical-equilibrium.html">
   Chemical Equilibrium
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../stat-thermo/stat-thermo.html">
   Statistical Thermodynamics
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../zbibliography.html">
   Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../contributing.html">
   Contributing to this book
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/second-law/solar-powered-pump.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/kyleniemeyer/computational-thermo"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/kyleniemeyer/computational-thermo/newbackend?urlpath=tree/book/content/second-law/solar-powered-pump.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/kyleniemeyer/computational-thermo/blob/newbackend/book/content/second-law/solar-powered-pump.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#determine-the-flow-rate-of-water-delivered">
   Determine the flow rate of water delivered
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#determine-area-of-solar-panels-required">
   Determine area of solar panels required
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="solar-powered-pump">
<h1>Solar-powered pump<a class="headerlink" href="#solar-powered-pump" title="Permalink to this headline">¶</a></h1>
<p>A solar-powered pump transports water from a source underground up to a tank. The PV solar panel converts solar energy into electrical power with an efficiency of <span class="math notranslate nohighlight">\(\eta_{\text{PV}} = 0.08\)</span> and stores the electrical energy in a battery, which powers the pump continuously. The 24-hour annual average solar flux is SF = 225 W/m<span class="math notranslate nohighlight">\(^2\)</span>.</p>
<p>The isentropic efficiency of the pump is 0.58, and the pump performance is given as pressure head versus flow rate:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Head (ft)</p></th>
<th class="head"><p>Flow rate (gpm)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>60</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>60</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>57</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>52</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>44</p></td>
<td><p>8</p></td>
</tr>
<tr class="row-odd"><td><p>33</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>18</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>14</p></td>
</tr>
</tbody>
</table>
<p>The water source is 20 ft below ground level (where the tank is located), so the pump must provide a pressure rise equal to the 20 ft of water. There is also head loss due to friction in the pipe; the total head loss (pressure drop due to friction) between the inlet and outlet is:
\begin{equation}
\Delta P_{\text{pipe}} = 20 \left[ \text{ft H}_2 \text{O} \right] + 0.085 \left[ \frac{ \text{ft H}_2 \text{O} }{\text{gpm}^2} \right] \dot{V}^2
\end{equation}
where <span class="math notranslate nohighlight">\(\dot{V}\)</span> is the volumetric flow rate.</p>
<p>We can assume water is an incompressible fluid here.</p>
<p><strong>Problem</strong>:</p>
<ul class="simple">
<li><p>Determine the flow rate delivered by the pump</p></li>
<li><p>Determine the area of the solar panel required by the system</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">optimize</span>
<span class="kn">import</span> <span class="nn">cantera</span> <span class="k">as</span> <span class="nn">ct</span>

<span class="kn">from</span> <span class="nn">pint</span> <span class="kn">import</span> <span class="n">UnitRegistry</span>
<span class="n">ureg</span> <span class="o">=</span> <span class="n">UnitRegistry</span><span class="p">()</span>
<span class="n">Q_</span> <span class="o">=</span> <span class="n">ureg</span><span class="o">.</span><span class="n">Quantity</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="c1"># these are mostly for making the saved figures nicer</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">set_matplotlib_formats</span>
<span class="n">set_matplotlib_formats</span><span class="p">(</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span> <span class="s1">&#39;png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.dpi&#39;</span><span class="p">]</span><span class="o">=</span> <span class="mi">150</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;savefig.dpi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">150</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="determine-the-flow-rate-of-water-delivered">
<h2>Determine the flow rate of water delivered<a class="headerlink" href="#determine-the-flow-rate-of-water-delivered" title="Permalink to this headline">¶</a></h2>
<p>First, specify the input information:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">solar_flux</span> <span class="o">=</span> <span class="n">Q_</span><span class="p">(</span><span class="mi">225</span><span class="p">,</span> <span class="s1">&#39;W/m^2&#39;</span><span class="p">)</span>
<span class="n">efficiency_pump</span> <span class="o">=</span> <span class="mf">0.58</span>
<span class="n">efficiency_solar</span> <span class="o">=</span> <span class="mf">0.08</span>
</pre></div>
</div>
</div>
</div>
<p>Next, to model the pump, we can fit the performance data to a third-order polynomial:
\begin{equation}
\Delta P_{\text{pump}} = a_0 + a_1 \dot{V} + a_2 \dot{V}^2 + a_3 \dot{V}^3
\end{equation}</p>
<p>We can find this fit using the NumPy function <code class="docutils literal notranslate"><span class="pre">polyfit()</span></code>, and place the result in a <code class="docutils literal notranslate"><span class="pre">poly1d</span></code> object so we can easily evaluate the polynomial:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Construct NumPy arrays with the pressure head and </span>
<span class="c1"># flow rate from the table</span>
<span class="n">head</span> <span class="o">=</span> <span class="n">Q_</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="s1">&#39;ft&#39;</span><span class="p">)</span>
<span class="n">flow_rate</span> <span class="o">=</span> <span class="n">Q_</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">]),</span> <span class="s1">&#39;gallon per minute&#39;</span><span class="p">)</span>

<span class="c1"># Perform the fit with degree 3, and place in a poly1d object</span>
<span class="n">pump_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">flow_rate</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">head</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="c1"># Plot the measurements</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flow_rate</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>

<span class="c1"># Generate a dense sample of flow rate values, then plot the polynomial fit</span>
<span class="n">flow_rate_dense</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">flow_rate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span> <span class="n">flow_rate</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">magnitude</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">flow_rate_dense</span><span class="p">,</span> <span class="n">pump_fit</span><span class="p">(</span><span class="n">flow_rate_dense</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Flow rate (</span><span class="si">{</span><span class="n">flow_rate</span><span class="o">.</span><span class="n">units</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pressure head (</span><span class="si">{</span><span class="n">head</span><span class="o">.</span><span class="n">units</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s1">&#39;Pump data&#39;</span><span class="p">,</span> <span class="s1">&#39;Best fit curve&#39;</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/share/miniconda/envs/thermo-env/lib/python3.7/site-packages/numpy/core/numeric.py:501: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  return array(a, dtype, copy=False, order=order)
</pre></div>
</div>
<img alt="../../_images/solar-powered-pump_6_1.png" src="../../_images/solar-powered-pump_6_1.png" />
</div>
</div>
<p>To find the volumetric flow rate of the pump, we need to find the condition where the pressure head of the pump matches the pressure drop of the pipe between the inlet and outlet. We can do this by setting two <span class="math notranslate nohighlight">\(\Delta P\)</span> expressions equal to each other, and the finding the root of this equation:
\begin{equation}
\Delta P_{\text{pump}} \left(\dot{V}\right) = \Delta P_{\text{pipe}} \left(\dot{V}\right)
\end{equation}</p>
<p>To find the root, we can use the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.root_scalar.html">SciPy function <code class="docutils literal notranslate"><span class="pre">root_scalar</span></code></a>, part of its <code class="docutils literal notranslate"><span class="pre">optimize</span></code> module. This needs needs us to provide a function that rearranges the above expression to equal zero, and returns that value. In other words, the function should return:
\begin{equation}
\Delta P_{\text{pump}} \left(\dot{V}\right) - \Delta P_{\text{pipe}} \left(\dot{V}\right)
\end{equation}
which will equal zero when the root is found.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pump_performance</span><span class="p">(</span><span class="n">volume_flow_rate</span><span class="p">,</span> <span class="n">pump_fit</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Find root of pump performance equations&#39;&#39;&#39;</span>
    <span class="n">volume_flow_rate</span> <span class="o">*=</span> <span class="n">ureg</span><span class="p">(</span><span class="s1">&#39;gal/min&#39;</span><span class="p">)</span>
    <span class="n">deltaP_pipe</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Q_</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;ft&#39;</span><span class="p">)</span> <span class="o">+</span> 
        <span class="n">Q_</span><span class="p">(</span><span class="mf">0.085</span><span class="p">,</span> <span class="s1">&#39;ft/((gal/min)**2)&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">volume_flow_rate</span><span class="o">**</span><span class="mi">2</span>
        <span class="p">)</span>
    <span class="n">deltaP_pump</span> <span class="o">=</span> <span class="n">pump_fit</span><span class="p">(</span><span class="n">volume_flow_rate</span><span class="p">)</span> <span class="o">*</span> <span class="n">ureg</span><span class="o">.</span><span class="n">ft</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">deltaP_pump</span> <span class="o">-</span> <span class="n">deltaP_pipe</span><span class="p">)</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;ft&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
</pre></div>
</div>
</div>
</div>
<p>Then, we call the <code class="docutils literal notranslate"><span class="pre">root_scalar</span></code> function, giving it the function we just created along with a range of possible values and the extra argument our function needs:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sol</span> <span class="o">=</span> <span class="n">optimize</span><span class="o">.</span><span class="n">root_scalar</span><span class="p">(</span>
    <span class="n">pump_performance</span><span class="p">,</span> <span class="n">bracket</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span> 
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">pump_fit</span><span class="p">,),</span>
    <span class="p">)</span>

<span class="n">volume_flow_rate</span> <span class="o">=</span> <span class="n">Q_</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;gal/min&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pump flow rate: </span><span class="si">{</span><span class="n">volume_flow_rate</span><span class="si">:</span><span class="s1"> .2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pump flow rate: 10.51 gallon / minute
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/share/miniconda/envs/thermo-env/lib/python3.7/site-packages/numpy/core/numeric.py:501: UnitStrippedWarning: The unit of the quantity is stripped when downcasting to ndarray.
  return array(a, dtype, copy=False, order=order)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="determine-area-of-solar-panels-required">
<h2>Determine area of solar panels required<a class="headerlink" href="#determine-area-of-solar-panels-required" title="Permalink to this headline">¶</a></h2>
<p>To determine the area of solar panels required, we first need to calculate the work needed for the pump:</p>
<div class="math notranslate nohighlight">
\[
\dot{W}_p = \frac{\dot{m} v \Delta P_{\text{pump}} }{\eta_p} = \frac{\dot{V} \Delta P_{\text{pump}} }{\eta_p}
\]</div>
<p>First, however, we’ll need to convert the pressure head (given in feet of water) to an actual pressure difference, using <span class="math notranslate nohighlight">\(h = \frac{P}{\rho g}\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pressure_head</span> <span class="o">=</span> <span class="n">Q_</span><span class="p">(</span><span class="n">pump_fit</span><span class="p">(</span><span class="n">volume_flow_rate</span><span class="p">),</span> <span class="s1">&#39;ft&#39;</span><span class="p">)</span>
<span class="n">water</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">Water</span><span class="p">()</span>
<span class="n">pressure_drop</span> <span class="o">=</span> <span class="n">pressure_head</span> <span class="o">*</span> <span class="n">Q_</span><span class="p">(</span><span class="n">water</span><span class="o">.</span><span class="n">density</span><span class="p">,</span> <span class="s1">&#39;kg/m^3&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="n">ureg</span><span class="o">.</span><span class="n">gravity</span>

<span class="n">work_pump</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">volume_flow_rate</span> <span class="o">*</span> <span class="n">pressure_drop</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s1">&#39;Pa&#39;</span><span class="p">)</span> <span class="o">/</span> 
    <span class="n">efficiency_pump</span>
    <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Pump work: </span><span class="si">{</span><span class="n">work_pump</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">ureg</span><span class="o">.</span><span class="n">watt</span><span class="p">)</span><span class="si">:</span><span class="s1"> .2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pump work: 100.13 watt
</pre></div>
</div>
</div>
</div>
<p>Finally, we can calculate the area required by relating the power generated by the solar panels to the rate of work required by the pump:</p>
<div class="math notranslate nohighlight">
\[
\text{SF} \, A \eta_{\text{PV}} = \dot{W}_p
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">area_solar</span> <span class="o">=</span> <span class="n">work_pump</span> <span class="o">/</span> <span class="p">(</span><span class="n">solar_flux</span> <span class="o">*</span> <span class="n">efficiency_solar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Area of solar panels required: </span><span class="si">{</span><span class="n">area_solar</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="s2">&quot;m^2&quot;</span><span class="p">)</span><span class="si">:</span><span class="s1"> .2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Area of solar panels required: 5.56 meter ** 2
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/second-law"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="turbine-efficiency.html" title="previous page">Turbine isentropic efficiency</a>
    <a class='right-next' id="next-link" href="../exergy/exergy.html" title="next page">Exergy</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Kyle Niemeyer<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>